"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[745],{3415:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>o});var r=s(4848),t=s(8453);const c={},d=void 0,i={id:"\u96c6\u7fa4/1.2k8s\u7cfb\u7edf\u5b89\u88c5\u57fa\u7840",title:"1.2k8s\u7cfb\u7edf\u5b89\u88c5\u57fa\u7840",description:"\u96c6\u7fa4\u89c4\u5212IP\u5730\u5740",source:"@site/ail_basis/3-\u96c6\u7fa4/1.2k8s\u7cfb\u7edf\u5b89\u88c5\u57fa\u7840.md",sourceDirName:"3-\u96c6\u7fa4",slug:"/\u96c6\u7fa4/1.2k8s\u7cfb\u7edf\u5b89\u88c5\u57fa\u7840",permalink:"/node_docs_docusaurus_temp/ailbasis/\u96c6\u7fa4/1.2k8s\u7cfb\u7edf\u5b89\u88c5\u57fa\u7840",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/ail_basis/3-\u96c6\u7fa4/1.2k8s\u7cfb\u7edf\u5b89\u88c5\u57fa\u7840.md",tags:[],version:"current",lastUpdatedBy:"\u201cAiluntz\u201d",lastUpdatedAt:1727340015e3,frontMatter:{},sidebar:"ailbasis",previous:{title:"1.1kvm\u7cfb\u7edf\u5b89\u88c5",permalink:"/node_docs_docusaurus_temp/ailbasis/\u865a\u62df\u673a/1.1kvm\u7cfb\u7edf\u5b89\u88c5"},next:{title:"1.2k8s\u7cfb\u7edf\u5b89\u88c5\u8282\u70b9",permalink:"/node_docs_docusaurus_temp/ailbasis/\u96c6\u7fa4/1.2k8s\u7cfb\u7edf\u5b89\u88c5\u8282\u70b9"}},l={},o=[{value:"\u96c6\u7fa4\u89c4\u5212IP\u5730\u5740",id:"\u96c6\u7fa4\u89c4\u5212ip\u5730\u5740",level:3},{value:"\u8bbe\u7f6e\u96c6\u7fa4\u4e3b\u673a\u540d",id:"\u8bbe\u7f6e\u96c6\u7fa4\u4e3b\u673a\u540d",level:3},{value:"\u5b89\u88c5docker",id:"\u5b89\u88c5docker",level:3},{value:"\u5b89\u88c5k8s",id:"\u5b89\u88c5k8s",level:3}];function a(e){const n={code:"code",h3:"h3",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"\u96c6\u7fa4\u89c4\u5212ip\u5730\u5740",children:"\u96c6\u7fa4\u89c4\u5212IP\u5730\u5740"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"K8s-master  10.211.55.15\nK8s-node1 10.211.55.16\nK8s-node2 10.211.55.17\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u8bbe\u7f6e\u96c6\u7fa4\u4e3b\u673a\u540d",children:"\u8bbe\u7f6e\u96c6\u7fa4\u4e3b\u673a\u540d"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"hostnamectl set-hostname k8s-master\nhostnamectl set-hostname k8s-node1\nhostnamectl set-hostname k8s-node2\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u540c\u6b65\u65f6\u95f4"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sudo timedatectl set-timezone Asia/Shanghai\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u66f4\u6539hots"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"cat >> /etc/hosts << EOF\n10.211.55.15 k8s-master\n10.211.55.16 k8s-node1\n10.211.55.17 k8s-node2\nEOF\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5173\u95ed\u9632\u706b\u5899\u548cselinux"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"systemctl stop firewalld #\u5173\u95ed\u9632\u706b\u5899\nsystemctl disable firewalld #\u7981\u6b62\u9632\u706b\u5899\u5f00\u673a\u81ea\u542f\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5173\u95edselinux"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sed -i 's/enforcing/disabled/' /etc/selinux/config # \u6c38\u4e45\nsetenforce 0 # \u4e34\u65f6\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5173\u95edswap"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"swapoff -a # \u4e34\u65f6\nvi /etc/fstab  #\u6c38\u4e45\n/dev/mapper/centos-swap swap swap default 0 0\xa0\u8fd9\u4e00\u884c\u524d\u9762\u52a0\u4e2a\xa0#\xa0\u53f7\u5c06\u5176\u6ce8\u91ca\u6389\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u8f6c\u53d1 IPv4 \u5e76\u8ba9 iptables \u770b\u5230\u6865\u63a5\u6d41\u91cf\uff0c\u4e09\u53f0\u670d\u52a1\u670d\u52a1\u5668\u90fd\u9700\u8981\u6267\u884c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"cat  > /etc/sysctl.d/k8s.conf << EOF\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nEOF\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u52a0\u8f7d\u6240\u6709\u7684\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sysctl --system\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4e0b\u8f7d\u963f\u91cc\u4e91\u7684 CentOS-Base.repo \u6587\u4ef6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sudo curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n"})}),"\n",(0,r.jsx)(n.p,{children:"ssl\u9519\u8bef\u89e3\u51b3"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"yum install openssl\nbash <(curl -sL https://raw.githubusercontent.com/daveleung/hijkpw-scripts-mod/main/xray_mod1.sh)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u5b89\u88c5docker",children:"\u5b89\u88c5docker"}),"\n",(0,r.jsx)(n.h3,{id:"\u5b89\u88c5k8s",children:"\u5b89\u88c5k8s"}),"\n",(0,r.jsx)(n.p,{children:"\u6dfb\u52a0\u963f\u91cc\u4e91yum\u8f6f\u4ef6\u6e90\uff0c\u914d\u7f6ekubernetes.repo\u7684\u6e90"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"cat  > /etc/yum.repos.d/kubernetes.repo <<EOF\n[kubernetes]\nname=Kubernetes\nbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/\nenabled=1\ngpgcheck=1\nrepo_gpgcheck=1\ngpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u81ea\u52a8\u751f\u6210\u516c\u94a5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"yum list\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u770byum\u53ef\u5b89\u88c5\u7684 k8s"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"yum list kubeadm --showduplicates | sort -r\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5b89\u88c5k8s"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"yum install -y kubelet-1.21.14-0 kubeadm-1.21.14-0 kubectl-1.21.14-0\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u542f\u52a8k8s"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"systemctl enable kubelet\n"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>i});var r=s(6540);const t={},c=r.createContext(t);function d(e){const n=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);