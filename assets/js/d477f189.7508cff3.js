"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7495],{7311:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>d,toc:()=>a});var t=i(4848),o=i(8453);const r={},s=void 0,d={id:"\u5f00\u53d1\u73af\u5883/1.2docker\u663e\u5361gpu\u5bb9\u5668",title:"1.2docker\u663e\u5361gpu\u5bb9\u5668",description:"\u5bb9\u5668\u4e2d\u6dfb\u52a0gpu",source:"@site/ail_basis/6-\u5f00\u53d1\u73af\u5883/1.2docker\u663e\u5361gpu\u5bb9\u5668.md",sourceDirName:"6-\u5f00\u53d1\u73af\u5883",slug:"/\u5f00\u53d1\u73af\u5883/1.2docker\u663e\u5361gpu\u5bb9\u5668",permalink:"/node_docs_docusaurus_temp/ailbasis/\u5f00\u53d1\u73af\u5883/1.2docker\u663e\u5361gpu\u5bb9\u5668",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/ail_basis/6-\u5f00\u53d1\u73af\u5883/1.2docker\u663e\u5361gpu\u5bb9\u5668.md",tags:[],version:"current",lastUpdatedBy:"\u201cAiluntz\u201d",lastUpdatedAt:1727340015e3,frontMatter:{},sidebar:"ailbasis",previous:{title:"1.0\u5f00\u53d1\u5bb9\u5668\u6302\u8f7d\u5f00\u53d1\u5377",permalink:"/node_docs_docusaurus_temp/ailbasis/\u5f00\u53d1\u73af\u5883/1.0\u5f00\u53d1\u5bb9\u5668\u6302\u8f7d\u5f00\u53d1\u5377"},next:{title:"1.2\u5b89\u88c5docker",permalink:"/node_docs_docusaurus_temp/ailbasis/\u5f00\u53d1\u73af\u5883/1.2\u5b89\u88c5docker"}},c={},a=[{value:"\u5bb9\u5668\u4e2d\u6dfb\u52a0gpu",id:"\u5bb9\u5668\u4e2d\u6dfb\u52a0gpu",level:3},{value:"ubuntu\u5b89\u88c5 NVIDIA \u9a71\u52a8",id:"ubuntu\u5b89\u88c5-nvidia-\u9a71\u52a8",level:3},{value:"centos\u5b89\u88c5 NVIDIA \u9a71\u52a8",id:"centos\u5b89\u88c5-nvidia-\u9a71\u52a8",level:3},{value:"\u5bbf\u4e3b\u673a\u6267\u884c\u5b89\u88c5nvidia-container-toolkit",id:"\u5bbf\u4e3b\u673a\u6267\u884c\u5b89\u88c5nvidia-container-toolkit",level:3},{value:"\u4fee\u6539Docker\u914d\u7f6e\u6587\u4ef6",id:"\u4fee\u6539docker\u914d\u7f6e\u6587\u4ef6",level:3}];function l(e){const n={code:"code",h3:"h3",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h3,{id:"\u5bb9\u5668\u4e2d\u6dfb\u52a0gpu",children:"\u5bb9\u5668\u4e2d\u6dfb\u52a0gpu"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"docker run --gpus 'all,capabilities=utility' --rm ubuntu mycontainer\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ubuntu\u5b89\u88c5-nvidia-\u9a71\u52a8",children:"ubuntu\u5b89\u88c5 NVIDIA \u9a71\u52a8"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html #\u5b98\u7f51\u6559\u7a0b\nsudo ubuntu-drivers autoinstall\nsudo reboot\nnvidia-smi\n"})}),"\n",(0,t.jsx)(n.h3,{id:"centos\u5b89\u88c5-nvidia-\u9a71\u52a8",children:"centos\u5b89\u88c5 NVIDIA \u9a71\u52a8"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo yum install epel-release\nsudo yum install https://www.elrepo.org/elrepo-release-7.el7.elrepo.noarch.rpm\nsudo yum --enablerepo=elrepo-kernel install kmod-nvidia\nsudo reboot\nnvidia-smi\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u5bbf\u4e3b\u673a\u6267\u884c\u5b89\u88c5nvidia-container-toolkit",children:"\u5bbf\u4e3b\u673a\u6267\u884c\u5b89\u88c5nvidia-container-toolkit"}),"\n",(0,t.jsx)(n.p,{children:"\u914d\u7f6e\u751f\u4ea7\u5b58\u50a8\u5e93\uff1aubuntu(\u5148\u5f00\u542f\u4ee3\u7406)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \\\n  && curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \\\n    sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \\\n    sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u914d\u7f6e\u751f\u4ea7\u5b58\u50a8\u5e93\uff1acentos(\u5148\u5f00\u542f\u4ee3\u7406)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"curl -s -L https://nvidia.github.io/libnvidia-container/stable/rpm/nvidia-container-toolkit.repo | \\\nsudo tee /etc/yum.repos.d/nvidia-container-toolkit.repo\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u53ef\u9009\uff0c\u914d\u7f6e\u5b58\u50a8\u5e93\u4ee5\u4f7f\u7528\u5b9e\u9a8c\u8f6f\u4ef6\u5305\uff1aubuntu"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sed -i -e '/experimental/ s/^#//g' /etc/apt/sources.list.d/nvidia-container-toolkit.list\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u53ef\u9009\uff0c\u914d\u7f6e\u5b58\u50a8\u5e93\u4ee5\u4f7f\u7528\u5b9e\u9a8c\u8f6f\u4ef6\u5305\uff1acentos"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo yum-config-manager --enable nvidia-container-toolkit-experimental\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5b89\u88c5NVIDIA\u5bb9\u5668\u5de5\u5177\u5305\uff1aubuntu"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo apt-get update\nsudo apt-get install -y nvidia-container-toolkit\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5b89\u88c5NVIDIA\u5bb9\u5668\u5de5\u5177\u5305\uff1acentos"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo yum install -y nvidia-container-toolkit\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u4fee\u6539docker\u914d\u7f6e\u6587\u4ef6",children:"\u4fee\u6539Docker\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,t.jsx)(n.p,{children:"\u4f7f\u7528nvidia-ctk\u547d\u4ee4\u914d\u7f6e\u5bb9\u5668\u8fd0\u884c\u65f6\uff08nvidia-ctk\u547d\u4ee4\u4fee\u6539\u4e3b\u673a\u4e0a\u7684/etc/docker/daemon.json\u6587\u4ef6\u3002\u6587\u4ef6\u5df2\u66f4\u65b0\uff0c\u4ee5\u4fbfDocker\u53ef\u4ee5\u4f7f\u7528NVIDIA\u5bb9\u5668\u8fd0\u884c\u65f6\u3002\uff09"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo nvidia-ctk runtime configure --runtime=docker\nsudo systemctl restart docker #\u91cd\u542fDocker\u5b88\u62a4\u8fdb\u7a0b\n"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>d});var t=i(6540);const o={},r=t.createContext(o);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);