"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4824],{1541:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var i=t(4848),r=t(8453);const s={},a=void 0,o={id:"web\u57fa\u7840/1.2\u914d\u7f6etauri\u914d\u7f6e\u78e8\u7802\u80cc\u666f",title:"1.2\u914d\u7f6etauri\u914d\u7f6e\u78e8\u7802\u80cc\u666f",description:"TAURI -Lottie -window-vibrancy",source:"@site/ail_basis/7-web\u57fa\u7840/1.2\u914d\u7f6etauri\u914d\u7f6e\u78e8\u7802\u80cc\u666f.md",sourceDirName:"7-web\u57fa\u7840",slug:"/web\u57fa\u7840/1.2\u914d\u7f6etauri\u914d\u7f6e\u78e8\u7802\u80cc\u666f",permalink:"/node_docs_docusaurus_temp/ailbasis/web\u57fa\u7840/1.2\u914d\u7f6etauri\u914d\u7f6e\u78e8\u7802\u80cc\u666f",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/ail_basis/7-web\u57fa\u7840/1.2\u914d\u7f6etauri\u914d\u7f6e\u78e8\u7802\u80cc\u666f.md",tags:[],version:"current",lastUpdatedBy:"\u201cAiluntz\u201d",lastUpdatedAt:1727340015e3,frontMatter:{},sidebar:"ailbasis",previous:{title:"1.2\u914d\u7f6etauri\u914d\u7f6e\u5f00\u5c4f\u52a8\u753b",permalink:"/node_docs_docusaurus_temp/ailbasis/web\u57fa\u7840/1.2\u914d\u7f6etauri\u914d\u7f6e\u5f00\u5c4f\u52a8\u753b"},next:{title:"nav",permalink:"/node_docs_docusaurus_temp/ailbasis/web\u57fa\u7840/nav"}},c={},d=[{value:"TAURI -Lottie -window-vibrancy",id:"tauri--lottie--window-vibrancy",level:3}];function l(n){const e={code:"code",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h3,{id:"tauri--lottie--window-vibrancy",children:"TAURI -Lottie -window-vibrancy"}),"\n",(0,i.jsx)(e.p,{children:"\u5b89\u88c5 TAURI CLI"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"npm install --save-dev @tauri-apps/cli\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6dfb\u52a0\u5230Package.json\u6587\u4ef6\u4e2d"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'"scripts": {\n  "tauri": "tauri"\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u521d\u59cb\u5316 Tauri"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"npm run tauri init\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539src-tauri\u4e2dtauri.conf.json\uff0c\u4fee\u6539distDir"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'"distDir": "../dist"\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539identifier\u53c2\u6570"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"com.ailuntz.dev\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6dfb\u52a0transparent\u53c2\u6570"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'"windows": [ { "transparent": true } ]\n'})}),"\n",(0,i.jsx)(e.p,{children:"tauri\u9879\u4e0b\u6dfb\u52a0macOSPrivateApi\u53c2\u6570"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'"macOSPrivateApi": true\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u7f51\u9875\u80cc\u666fsrc-app.css-index.css"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"html, body { background: transparent }\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5207\u6362\u81f3src-tauri\u76ee\u5f55\u7ec8\u7aef\uff08cargo\u4ed3\u5e93\u6240\u5728\u76ee\u5f55\uff09\n\u5b89\u88c5 window-vibrancy"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"cargo add window-vibrancy@0.4.0\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5728 src-tauri/src\u4e0b\u65b0\u5efa setup.rs"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'use tauri::{App, Manager};\nuse window_vibrancy::{self, NSVisualEffectMaterial};\n\n/// setup\npub fn init(app: &mut App) -> std::result::Result<(), Box<dyn std::error::Error>> {\n    let win = app.get_window("main").unwrap();\n    // \u4ec5\u5728 macOS \u4e0b\u6267\u884c\n    #[cfg(target_os = "macos")]\n    window_vibrancy::apply_vibrancy(&win, NSVisualEffectMaterial::FullScreenUI, None, None)\n        .expect("Unsupported platform! \'apply_vibrancy\' is only supported on macOS");\n    // \u4ec5\u5728 windows \u4e0b\u6267\u884c\n    #[cfg(target_os = "windows")]\n    window_vibrancy::apply_blur(&win, Some((18, 18, 18, 125)))\n        .expect("Unsupported platform! \'apply_blur\' is only supported on Windows");\n\n    Ok(())\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u5728 src-tauri/src/main.rs\n\u4e2d\u4f7f\u7528 setup.rs"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'mod setup;\n\nfn main() {\n    let context = tauri::generate_context!();\n    tauri::Builder::default()\n        .setup(setup::init)\n        .run(context)\n        .expect("error while running OhMyBox application");\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u6dfb\u52a0\u5de5\u4f5c\u6d41.github/workflows/publish.yml"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u5185\u5bb9\u5982\u9644\u5f55\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539github-action\u8bfb\u5199"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"Workflow permissions -Read and write permissions\n"})}),"\n",(0,i.jsx)(e.p,{children:"web\u751f\u6210\u9759\u6001\u6587\u4ef6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"npm run build\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6egit\uff0c\u63a8\u9001\u5e76\u89e6\u53d1release"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'git add .\ngit commit -m "Update GitHub Actions workflow with Tauri configuration"\ngit push origin master\ngit checkout -b release\ngit push origin release\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u6362\u57fa\u540e\u8bb0\u5f97\u6362\u56de\u624d\u80fd\u6b63\u5e38\u914d\u7f6etauri"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"export default defineConfig({\n  // base: '/nodevitereacttemp3/', // \u8bbe\u7f6e `base` \u8def\u5f84\n  plugins: [react()],\n})\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539github action yml\u6587\u4ef6\u751f\u6210win\u7684\u5e94\u7528\u7a0b\u5e8f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"name: 'publish'\n\non:\n  push:\n    branches:\n      - release\n\njobs:\n  publish-tauri:\n    permissions:\n      contents: write\n    strategy:\n      fail-fast: false\n      matrix:\n        include:\n          # - platform: 'macos-latest'\n          #   args: '--target aarch64-apple-darwin'\n          - platform: 'macos-latest'\n            args: '--target x86_64-apple-darwin'\n          # - platform: 'ubuntu-22.04'\n          #   args: ''\n          # - platform: 'windows-latest'\n          #   args: ''\n\n    runs-on: ${{ matrix.platform }}\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: setup node\n        uses: actions/setup-node@v4\n        with:\n          node-version: lts/*\n\n      - name: install Rust stable\n        uses: dtolnay/rust-toolchain@stable\n        with:\n          targets: ${{ matrix.platform == 'macos-latest' && 'aarch64-apple-darwin,x86_64-apple-darwin' || '' }}\n\n      - name: install dependencies (ubuntu only)\n        if: matrix.platform == 'ubuntu-22.04'\n        run: |\n          sudo apt-get update\n          sudo apt-get install -y libwebkit2gtk-4.0-dev libwebkit2gtk-4.1-dev libappindicator3-dev librsvg2-dev patchelf\n\n      - name: install frontend dependencies\n        run: npm install\n\n      - uses: tauri-apps/tauri-action@v0\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n        with:\n          tagName: app-v__VERSION__\n          releaseName: 'App v__VERSION__'\n          releaseBody: 'See the assets to download this version and install.'\n          releaseDraft: true\n          prerelease: false\n          distPath: ../dist\n          iconPath: ./icons/app_512.png\n          bundleIdentifier: 'tools.ailuntz1.app'\n          # appName: 'you1'\n          # appVersion: '0.9.1'\n          includeUpdaterJson: false\n          args: --target x86_64-apple-darwin\n          #args:  --config custom-config.json\n          #args: --target x86_64-apple-darwin --config custom-config.json\n\n        \n          \n      \n"})})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(l,{...n})}):l(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>o});var i=t(6540);const r={},s=i.createContext(r);function a(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);